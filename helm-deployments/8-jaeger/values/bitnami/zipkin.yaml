zipkin:
  enabled: true
  global:
    defaultStorageClass: "longhorn-static"
  diagnosticMode:
    enabled: false
  javaOpts: ""
  image:
    debug: false
    tag: latest
  replicaCount: 1
  containerPorts:
    http: 9411
  usePasswordFile: true
  storageType: cassandra3
  tls:
    enabled: false
    usePemCerts: true
    existingSecret: ""
    certFilename: tls.crt
    certKeyFilename: tls.key
    keystoreFilename: zipkin.jks
    password: ""
    passwordSecret: ""
    autoGenerated:
      enabled: true
      engine: helm
      certManager:
        existingIssuer: ""
        existingIssuerKind: ""
        keySize: 2048
        keyAlgorithm: RSA
        duration: 2160h
        renewBefore: 360h
  livenessProbe:
    enabled: true
  readinessProbe:
    enabled: true
  resourcesPreset: "medium"
  containerSecurityContext:
    enabled: true
  javaOpts: "-Xmx1G"
  automountServiceAccountToken: true
  service:
    type: ClusterIP
    ports:
      http: 9411
    nodePorts:
      http: ""
  defaultInitContainers:
    waitForCassandra:
      enabled: true
    initCerts:
      enabled: false
  externalDatabase:
    host: "jaeger-cassandra.jaeger-cassandra.svc.cluster.local"
    port: 9042
    user: cassandra
    existingSecret: "cassandra-secrets "
    existingSecretPasswordKey: "cassandra-password"
    cluster:
      datacenter: "dc1"
    keyspace: "zipkin"
  cassandra:
    enabled: false
    initDB:
      create_keyspace.cql: |
        CREATE KEYSPACE {{ include "zipkin.cassandra.keyspace" . }} WITH REPLICATION = { 'class' : 'SimpleStrategy', 'replication_factor' : 1 };
    ## @param cassandra.extraEnvVars [array] Add extra env variables to the Cassandra installation
    ## Note: Zipkin requires SASI indexes
    extraEnvVars:
      - name: CASSANDRA_CFG_YAML_SASI_INDEXES_ENABLED
        value: "true"
